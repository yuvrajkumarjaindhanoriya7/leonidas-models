<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>YJD.AI</title>
</head>
<body style="margin:0;font-family:Arial;background:#0f172a;color:white;display:flex;flex-direction:column;height:100vh;">

<div style="background:#1e293b;padding:15px;text-align:center;font-size:20px;font-weight:bold;color:#ffaa00;">
    âš¡  AI
</div>

<div id="chat" style="flex:1;overflow-y:auto;padding:15px;display:flex;flex-direction:column;gap:10px;"></div>

<div style="display:flex;padding:10px;background:#1e293b;">
    <input id="userInput" type="text" placeholder="Ask Cerebras anything..." 
    style="flex:1;padding:10px;border:none;border-radius:5px;font-size:16px;outline:none;">
    <button onclick="sendMessage()" 
    style="margin-left:10px;padding:10px 15px;border:none;border-radius:5px;background:#ffaa00;color:black;font-weight:bold;cursor:pointer;">
    Send
    </button>
</div>

<script>
// I removed the extra spaces from your key here
const CEREBRAS_API_KEY = "_______".trim(); 

const chatDiv = document.getElementById("chat");

function addMessage(text, sender){
    let msg = document.createElement("div");
    msg.style.padding = "10px";
    msg.style.borderRadius = "8px";
    msg.style.maxWidth = "70%";
    msg.style.wordWrap = "break-word";
    msg.style.background = (sender === "user") ? "#2563eb" : "#334155";
    msg.style.alignSelf = (sender === "user") ? "flex-end" : "flex-start";
    msg.innerText = text;
    chatDiv.appendChild(msg);
    chatDiv.scrollTop = chatDiv.scrollHeight;
}

async function sendMessage(){
    let input = document.getElementById("userInput");
    let text = input.value.trim();
    if(text === "") return;

    addMessage(text, "user");
    input.value = "";
    addMessage("Thinking...", "ai");

    try {
        const response = await fetch("https://api.cerebras.ai/v1/chat/completions", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": "Bearer " + CEREBRAS_API_KEY
            },
            body: JSON.stringify({
                model: "llama3.1-8b", 
                messages: [{role: "user", content: text}]
            })
        });

        const data = await response.json();
        
        // Safety check: Remove the "Thinking..." message
        if (chatDiv.lastChild) chatDiv.lastChild.remove(); 

        if (response.ok) {
            addMessage(data.choices[0].message.content, "ai");
        } else {
            // This will show you exactly why Cerebras is upset
            addMessage("Cerebras Error: " + (data.error?.message || "Invalid Request"), "ai");
            console.error("Full Error Data:", data);
        }
    } catch(error) {
        if (chatDiv.lastChild) chatDiv.lastChild.remove();
        addMessage("Network error. Check your internet or CORS settings.", "ai");
        console.error("Fetch Error:", error);
    }
}

document.getElementById("userInput").addEventListener("keypress", (e) => {
    if(e.key === "Enter") sendMessage();
});
</script>
</body>
</html>
